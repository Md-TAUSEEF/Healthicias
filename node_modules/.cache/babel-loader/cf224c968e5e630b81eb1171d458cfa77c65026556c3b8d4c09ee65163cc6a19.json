{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/91725/Downloads/Healthicious-main/Client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/91725/Downloads/Healthicious-main/Client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/91725/Downloads/Healthicious-main/Client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import{useAuth}from'../Auth/Store_Token/Utils_Token';import{NavLink}from'react-router-dom';import'./Admin.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var AdminDashboard=function AdminDashboard(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),contacts=_useState2[0],setContacts=_useState2[1];var _useAuth=useAuth(),Authorization=_useAuth.Authorization;useEffect(function(){var fetchContacts=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return fetch(\"\".concat(window.location.origin,\"/api/form/getall\"),{method:'GET',headers:{'Content-Type':'application/json','Authorization':Authorization}});case 3:response=_context.sent;_context.next=6;return response.json();case 6:data=_context.sent;setContacts(data.alluser);_context.next=13;break;case 10:_context.prev=10;_context.t0=_context[\"catch\"](0);console.error(_context.t0);case 13:case\"end\":return _context.stop();}},_callee,null,[[0,10]]);}));return function fetchContacts(){return _ref.apply(this,arguments);};}();fetchContacts();},[Authorization]);var handleDelete=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(id){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return fetch(\"\".concat(window.location.origin,\"/api/form/contact/delet/\").concat(id),{method:'DELETE',headers:{'Content-Type':'application/json','Authorization':Authorization}});case 3:setContacts(contacts.filter(function(contact){return contact._id!==id;}));_context2.next=9;break;case 6:_context2.prev=6;_context2.t0=_context2[\"catch\"](0);console.error(_context2.t0);case 9:case\"end\":return _context2.stop();}},_callee2,null,[[0,6]]);}));return function handleDelete(_x){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"Admindashboard\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Contact List\"}),/*#__PURE__*/_jsx(\"ul\",{children:contacts.map(function(contact){return/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:contact.username}),\" - \",contact.email,\" - \",contact.phone,\" - \",contact.msg,/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return handleDelete(contact._id);},children:\"Delete\"}),/*#__PURE__*/_jsx(NavLink,{to:\"/update/\".concat(contact._id),children:/*#__PURE__*/_jsx(\"button\",{children:\"Update\"})})]},contact._id);})})]});};export default AdminDashboard;","map":{"version":3,"names":["React","useState","useEffect","useAuth","NavLink","jsx","_jsx","jsxs","_jsxs","AdminDashboard","_useState","_useState2","_slicedToArray","contacts","setContacts","_useAuth","Authorization","fetchContacts","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","response","data","wrap","_callee$","_context","prev","next","fetch","concat","window","location","origin","method","headers","sent","json","alluser","t0","console","error","stop","apply","arguments","handleDelete","_ref2","_callee2","id","_callee2$","_context2","filter","contact","_id","_x","className","children","map","username","email","phone","msg","onClick","to"],"sources":["C:/Users/91725/Downloads/Healthicious-main/Client/src/components/Dashboard/AdminDashboard.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useAuth } from '../Auth/Store_Token/Utils_Token';\r\nimport { NavLink } from 'react-router-dom';\r\nimport './Admin.css';\r\nconst AdminDashboard = () => {\r\n    const [contacts, setContacts] = useState([]);\r\n    const { Authorization } = useAuth(); \r\n\r\n    useEffect(() => {\r\n        const fetchContacts = async () => {\r\n            try {\r\n                const response = await fetch(`${window.location.origin}/api/form/getall`, {\r\n                    method: 'GET',\r\n                    headers: {\r\n                        'Content-Type': 'application/json',\r\n                        'Authorization': Authorization\r\n                    }\r\n                });\r\n                const data = await response.json();\r\n                setContacts(data.alluser);\r\n            } catch (error) {\r\n                console.error(error);\r\n            }\r\n        };\r\n        fetchContacts();\r\n    }, [Authorization]);\r\n\r\n    const handleDelete = async (id) => {\r\n        try {\r\n            await fetch(`${window.location.origin}/api/form/contact/delet/${id}`, {\r\n                method: 'DELETE',\r\n                headers: {\r\n                    'Content-Type': 'application/json',\r\n                    'Authorization': Authorization\r\n                }\r\n            });\r\n            setContacts(contacts.filter(contact => contact._id !== id));\r\n        } catch (error) {\r\n            console.error(error);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className='Admindashboard'>\r\n            <h2>Contact List</h2>\r\n            <ul>\r\n                {contacts.map((contact) => (\r\n                    <li key={contact._id}>\r\n                        <strong>{contact.username}</strong> - {contact.email} - {contact.phone} - {contact.msg}\r\n                        <button onClick={() => handleDelete(contact._id)}>Delete</button>\r\n                        <NavLink to={`/update/${contact._id}`}>\r\n                            <button>Update</button>\r\n                        </NavLink>\r\n                    </li>\r\n                ))}\r\n            </ul>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default AdminDashboard;\r\n"],"mappings":"qaAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,OAASC,OAAO,KAAQ,iCAAiC,CACzD,OAASC,OAAO,KAAQ,kBAAkB,CAC1C,MAAO,aAAa,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBACrB,GAAM,CAAAC,cAAc,CAAG,QAAjB,CAAAA,cAAcA,CAAA,CAAS,CACzB,IAAAC,SAAA,CAAgCT,QAAQ,CAAC,EAAE,CAAC,CAAAU,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAArCG,QAAQ,CAAAF,UAAA,IAAEG,WAAW,CAAAH,UAAA,IAC5B,IAAAI,QAAA,CAA0BZ,OAAO,CAAC,CAAC,CAA3Ba,aAAa,CAAAD,QAAA,CAAbC,aAAa,CAErBd,SAAS,CAAC,UAAM,CACZ,GAAM,CAAAe,aAAa,6BAAAC,IAAA,CAAAC,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAAG,SAAAC,QAAA,MAAAC,QAAA,CAAAC,IAAA,QAAAJ,mBAAA,GAAAK,IAAA,UAAAC,SAAAC,QAAA,iBAAAA,QAAA,CAAAC,IAAA,CAAAD,QAAA,CAAAE,IAAA,SAAAF,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA,SAES,CAAAC,KAAK,IAAAC,MAAA,CAAIC,MAAM,CAACC,QAAQ,CAACC,MAAM,qBAAoB,CACtEC,MAAM,CAAE,KAAK,CACbC,OAAO,CAAE,CACL,cAAc,CAAE,kBAAkB,CAClC,eAAe,CAAEpB,aACrB,CACJ,CAAC,CAAC,QANIO,QAAQ,CAAAI,QAAA,CAAAU,IAAA,CAAAV,QAAA,CAAAE,IAAA,SAOK,CAAAN,QAAQ,CAACe,IAAI,CAAC,CAAC,QAA5Bd,IAAI,CAAAG,QAAA,CAAAU,IAAA,CACVvB,WAAW,CAACU,IAAI,CAACe,OAAO,CAAC,CAACZ,QAAA,CAAAE,IAAA,kBAAAF,QAAA,CAAAC,IAAA,IAAAD,QAAA,CAAAa,EAAA,CAAAb,QAAA,aAE1Bc,OAAO,CAACC,KAAK,CAAAf,QAAA,CAAAa,EAAM,CAAC,CAAC,yBAAAb,QAAA,CAAAgB,IAAA,MAAArB,OAAA,iBAE5B,kBAdK,CAAAL,aAAaA,CAAA,SAAAC,IAAA,CAAA0B,KAAA,MAAAC,SAAA,OAclB,CACD5B,aAAa,CAAC,CAAC,CACnB,CAAC,CAAE,CAACD,aAAa,CAAC,CAAC,CAEnB,GAAM,CAAA8B,YAAY,6BAAAC,KAAA,CAAA5B,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAAG,SAAA2B,SAAOC,EAAE,SAAA7B,mBAAA,GAAAK,IAAA,UAAAyB,UAAAC,SAAA,iBAAAA,SAAA,CAAAvB,IAAA,CAAAuB,SAAA,CAAAtB,IAAA,SAAAsB,SAAA,CAAAvB,IAAA,GAAAuB,SAAA,CAAAtB,IAAA,SAEhB,CAAAC,KAAK,IAAAC,MAAA,CAAIC,MAAM,CAACC,QAAQ,CAACC,MAAM,6BAAAH,MAAA,CAA2BkB,EAAE,EAAI,CAClEd,MAAM,CAAE,QAAQ,CAChBC,OAAO,CAAE,CACL,cAAc,CAAE,kBAAkB,CAClC,eAAe,CAAEpB,aACrB,CACJ,CAAC,CAAC,QACFF,WAAW,CAACD,QAAQ,CAACuC,MAAM,CAAC,SAAAC,OAAO,QAAI,CAAAA,OAAO,CAACC,GAAG,GAAKL,EAAE,GAAC,CAAC,CAACE,SAAA,CAAAtB,IAAA,gBAAAsB,SAAA,CAAAvB,IAAA,GAAAuB,SAAA,CAAAX,EAAA,CAAAW,SAAA,aAE5DV,OAAO,CAACC,KAAK,CAAAS,SAAA,CAAAX,EAAM,CAAC,CAAC,wBAAAW,SAAA,CAAAR,IAAA,MAAAK,QAAA,gBAE5B,kBAbK,CAAAF,YAAYA,CAAAS,EAAA,SAAAR,KAAA,CAAAH,KAAA,MAAAC,SAAA,OAajB,CAED,mBACIrC,KAAA,QAAKgD,SAAS,CAAC,gBAAgB,CAAAC,QAAA,eAC3BnD,IAAA,OAAAmD,QAAA,CAAI,cAAY,CAAI,CAAC,cACrBnD,IAAA,OAAAmD,QAAA,CACK5C,QAAQ,CAAC6C,GAAG,CAAC,SAACL,OAAO,qBAClB7C,KAAA,OAAAiD,QAAA,eACInD,IAAA,WAAAmD,QAAA,CAASJ,OAAO,CAACM,QAAQ,CAAS,CAAC,MAAG,CAACN,OAAO,CAACO,KAAK,CAAC,KAAG,CAACP,OAAO,CAACQ,KAAK,CAAC,KAAG,CAACR,OAAO,CAACS,GAAG,cACtFxD,IAAA,WAAQyD,OAAO,CAAE,SAAAA,QAAA,QAAM,CAAAjB,YAAY,CAACO,OAAO,CAACC,GAAG,CAAC,EAAC,CAAAG,QAAA,CAAC,QAAM,CAAQ,CAAC,cACjEnD,IAAA,CAACF,OAAO,EAAC4D,EAAE,YAAAjC,MAAA,CAAasB,OAAO,CAACC,GAAG,CAAG,CAAAG,QAAA,cAClCnD,IAAA,WAAAmD,QAAA,CAAQ,QAAM,CAAQ,CAAC,CAClB,CAAC,GALLJ,OAAO,CAACC,GAMb,CAAC,EACR,CAAC,CACF,CAAC,EACJ,CAAC,CAEd,CAAC,CAED,cAAe,CAAA7C,cAAc"},"metadata":{},"sourceType":"module","externalDependencies":[]}